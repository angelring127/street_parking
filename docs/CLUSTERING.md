# ğŸ—ºï¸ ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ë§ ì‹œìŠ¤í…œ

## ê°œìš”

7,000ê°œ ì´ìƒì˜ ì£¼ì°¨ ë¯¸í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í‘œì‹œí•˜ê¸° ìœ„í•´ **ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ë§** ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## ì‘ë™ ì›ë¦¬

### 1. ğŸ“ ì¤Œ ë ˆë²¨ì— ë”°ë¥¸ í‘œì‹œ ë°©ì‹

#### ë‚®ì€ ì¤Œ (ì „ì²´ ë³´ê¸°)

- ì§€ì—­ë³„ë¡œ ê·¸ë£¹í™”ëœ í´ëŸ¬ìŠ¤í„° í‘œì‹œ
- ê° í´ëŸ¬ìŠ¤í„°ì— ì£¼ì°¨ ë¯¸í„° ê°œìˆ˜ í‘œì‹œ
- ì˜ˆ: "150ê°œ", "85ê°œ"

#### ì¤‘ê°„ ì¤Œ (ì§€ì—­ ë³´ê¸°)

- ë” ì‘ì€ ê·¸ë£¹ìœ¼ë¡œ ì„¸ë¶„í™”
- ê·¼ì²˜ ì£¼ì°¨ ë¯¸í„°ë“¤ì„ ì†Œê·¸ë£¹ìœ¼ë¡œ í‘œì‹œ
- ì˜ˆ: "12ê°œ", "8ê°œ"

#### ë†’ì€ ì¤Œ (ìµœëŒ€ í™•ëŒ€)

- ì¤Œ ë ˆë²¨ 17 ì´ìƒì—ì„œ í´ëŸ¬ìŠ¤í„° í•´ì œ
- ê°œë³„ ì£¼ì°¨ ë¯¸í„° ë§ˆì»¤ í‘œì‹œ
- ì •í™•í•œ ìœ„ì¹˜ì™€ ìš”ê¸ˆ ì •ë³´ í™•ì¸ ê°€ëŠ¥

### 2. ğŸ¨ í´ëŸ¬ìŠ¤í„° ë””ìì¸

**ë‹¨ìƒ‰ ë¹¨ê°„ìƒ‰ ì›í˜•:**

- ëª¨ë“  í´ëŸ¬ìŠ¤í„°ë¥¼ ì¼ê´€ëœ ë¹¨ê°„ìƒ‰(`#ef4444`)ìœ¼ë¡œ í‘œì‹œ
- ê°œìˆ˜ì— ë”°ë¼ ì›ì˜ í¬ê¸°ë§Œ ìë™ ì¡°ì ˆ
- ì‹œê°ì  ì¼ê´€ì„± ë° ë¸Œëœë“œ ì•„ì´ë´í‹°í‹° ê°•í™”

**ê°€ë…ì„± ìµœì í™”:**

- ì•„ì´ì½˜ í¬ê¸°: 80px Ã— 80px
- êµµì€ í°íŠ¸: 900 weight
- í°ìƒ‰ í…ìŠ¤íŠ¸ (`color: white`)
- ê°•í•œ í…ìŠ¤íŠ¸ ê·¸ë¦¼ì: `2px 2px 4px rgba(0, 0, 0, 0.8)`
- ê°•í•œ ë°•ìŠ¤ ê·¸ë¦¼ì: `0 6px 12px rgba(0, 0, 0, 0.4)`

### 3. ğŸ–±ï¸ ìƒí˜¸ì‘ìš©

#### í´ëŸ¬ìŠ¤í„° í´ë¦­

- ìë™ìœ¼ë¡œ í•´ë‹¹ ì˜ì—­ìœ¼ë¡œ ì¤Œì¸
- ë” ìƒì„¸í•œ ì •ë³´ í‘œì‹œ

#### ë§ˆì»¤ í´ë¦­

- ì§€ë„ ì¤‘ì•™ìœ¼ë¡œ ë¶€ë“œëŸ½ê²Œ ì´ë™ (ì¤Œ ë ˆë²¨ ìœ ì§€)
- íŒì—…ìœ¼ë¡œ ì£¼ì°¨ ì •ë³´ ì¦‰ì‹œ í‘œì‹œ
- ë¦¬ìŠ¤íŠ¸ë¡œ ìë™ ìŠ¤í¬ë¡¤ (ì„ íƒë¨)
- Google Maps / Apple Maps ë§í¬ ì œê³µ

#### í˜¸ë²„ íš¨ê³¼

- í´ëŸ¬ìŠ¤í„°ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ í™•ëŒ€ íš¨ê³¼
- ì˜í–¥ ë²”ìœ„ í‘œì‹œ

## ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

### ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬

- `leaflet.markercluster`: Leaflet ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ë§ í”ŒëŸ¬ê·¸ì¸
- `@types/leaflet.markercluster`: TypeScript íƒ€ì… ì •ì˜

### ì„¤ì • ì˜µì…˜

```typescript
const markerClusterGroup = L.markerClusterGroup({
  // ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼è§£é™¤ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«
  disableClusteringAtZoom: 17,

  // ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åŠå¾„ (px)
  maxClusterRadius: 80,

  // ã‚¹ãƒ‘ã‚¤ãƒ€ãƒ¼ãƒ•ã‚¡ã‚¤è¡¨ç¤º (ë¬¼ë°©ìš¸ íš¨ê³¼ ì œê±°)
  spiderfyOnMaxZoom: false,
  spiderfyOnEveryZoom: false,

  // ãƒ›ãƒãƒ¼æ™‚ã«ã‚«ãƒãƒ¬ãƒƒã‚¸è¡¨ç¤º
  showCoverageOnHover: true,

  // ã‚¯ãƒªãƒƒã‚¯æ™‚ã«ãƒã‚¦ãƒ³ãƒ‰ã«ã‚ºãƒ¼ãƒ 
  zoomToBoundsOnClick: true,
});
```

### ì»¤ìŠ¤í…€ ì•„ì´ì½˜

```typescript
iconCreateFunction: (cluster) => {
  const count = cluster.getChildCount();
  let className = "marker-cluster-small";

  if (count >= 100) {
    className = "marker-cluster-large";
  } else if (count >= 50) {
    className = "marker-cluster-medium";
  }

  return L.divIcon({
    html: `<div><span>${count}ê°œ</span></div>`,
    className: `marker-cluster ${className}`,
    iconSize: L.point(80, 80), // í¬ê¸° ì¦ê°€
  });
};
```

### ê°€ê²© í‘œì‹œ ë§ˆì»¤

```typescript
const createPriceIcon = (meter: ParkingMeter, day?: number, hour?: number) => {
  const rate =
    day !== undefined && hour !== undefined
      ? getRateByDayAndHour(meter, day, hour)
      : getCurrentRate(meter);
  const price = parsePrice(rate);

  // ê°€ê²©ì— ë”°ë¥¸ ìƒ‰ìƒ ì„¤ì •
  let bgColor = "#10b981"; // ì´ˆë¡ìƒ‰ (ì €ë ´)
  if (price >= 4) {
    bgColor = "#ef4444"; // ë¹¨ê°„ìƒ‰ (ë¹„ìŒˆ)
  } else if (price >= 3) {
    bgColor = "#f59e0b"; // ì£¼í™©ìƒ‰ (ì¤‘ê°„)
  }

  return L.divIcon({
    html: `
      <div class="price-marker" style="background-color: ${bgColor}">
        <span>${rate}</span>
      </div>
    `,
    className: "custom-price-marker",
    iconSize: [50, 30],
    iconAnchor: [25, 30],
    popupAnchor: [0, -30],
  });
};
```

## ì„±ëŠ¥ ìµœì í™”

### Before (í´ëŸ¬ìŠ¤í„°ë§ ì—†ìŒ)

- 7,000ê°œ ë§ˆì»¤ ë™ì‹œ ë Œë”ë§
- ì´ˆê¸° ë¡œë”© ì‹œê°„: ~5ì´ˆ
- ì§€ë„ ì´ë™ ì‹œ ë ‰
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ë†’ìŒ

### After (í´ëŸ¬ìŠ¤í„°ë§ ì ìš©)

- í™”ë©´ì— ë³´ì´ëŠ” ë§ˆì»¤ë§Œ ë Œë”ë§
- ì´ˆê¸° ë¡œë”© ì‹œê°„: ~1ì´ˆ
- ë¶€ë“œëŸ¬ìš´ ì§€ë„ ì´ë™
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ë‚®ìŒ

**ì„±ëŠ¥ ê°œì„ : ì•½ 80%** ğŸš€

## ì‚¬ìš©ì ê²½í—˜

### 1. íƒìƒ‰ íë¦„

```
1. ì „ì²´ ì§€ë„ ë³´ê¸°
   â†“ (í´ëŸ¬ìŠ¤í„° í´ë¦­)
2. ì§€ì—­ë³„ ë³´ê¸°
   â†“ (í´ëŸ¬ìŠ¤í„° í´ë¦­ ë˜ëŠ” ì¤Œì¸)
3. ìƒì„¸ ì§€ì—­ ë³´ê¸°
   â†“ (ìµœëŒ€ ì¤Œì¸)
4. ê°œë³„ ì£¼ì°¨ ë¯¸í„° í™•ì¸
```

### 2. ì •ë³´ ê³„ì¸µ

```
ë ˆë²¨ 1: ë„ì‹œ ì „ì²´ (100+ ê°œ í´ëŸ¬ìŠ¤í„°)
  â†“
ë ˆë²¨ 2: ì§€ì—­ (50-99ê°œ í´ëŸ¬ìŠ¤í„°)
  â†“
ë ˆë²¨ 3: ë¸”ë¡ (10-49ê°œ í´ëŸ¬ìŠ¤í„°)
  â†“
ë ˆë²¨ 4: ê°œë³„ ì£¼ì°¨ ë¯¸í„°
```

## ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### CSS í´ë˜ìŠ¤

```css
/* ê¸°ë³¸ í´ëŸ¬ìŠ¤í„° ìŠ¤íƒ€ì¼ */
.marker-cluster {
  background-clip: padding-box;
  border-radius: 50%;
  text-align: center;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
}

.marker-cluster div {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-size: 22px;
  font-weight: 900;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

/* ë‹¨ìƒ‰ ë¹¨ê°„ìƒ‰ í´ëŸ¬ìŠ¤í„° (ëª¨ë“  í¬ê¸°) */
.marker-cluster-small,
.marker-cluster-medium,
.marker-cluster-large {
  background-color: #ef4444;
}

.marker-cluster-small div,
.marker-cluster-medium div,
.marker-cluster-large div {
  background-color: #ef4444;
  color: white;
}

/* í˜¸ë²„ íš¨ê³¼ */
.marker-cluster:hover {
  transform: scale(1.15);
  transition: transform 0.2s ease;
  cursor: pointer;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
}

/* ê°€ê²© ë§ˆì»¤ ìŠ¤íƒ€ì¼ */
.custom-price-marker {
  background: transparent !important;
  border: none !important;
}

.price-marker {
  padding: 4px 8px;
  border-radius: 12px;
  color: white;
  font-weight: 800;
  font-size: 13px;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  border: 2px solid white;
  white-space: nowrap;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.price-marker:hover {
  transform: scale(1.1);
}

.price-marker span {
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}
```

## ëª¨ë°”ì¼ ìµœì í™”

### í„°ì¹˜ ìƒí˜¸ì‘ìš©

- íƒ­ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° í™•ì¥
- í•€ì¹˜ ì¤Œìœ¼ë¡œ ë ˆë²¨ ì¡°ì •
- ë“œë˜ê·¸ë¡œ ì§€ë„ ì´ë™

### ë°˜ì‘í˜• í´ëŸ¬ìŠ¤í„° í¬ê¸°

- ëª¨ë°”ì¼: ì‘ì€ í´ëŸ¬ìŠ¤í„° ì•„ì´ì½˜
- íƒœë¸”ë¦¿: ì¤‘ê°„ í¬ê¸°
- ë°ìŠ¤í¬í†±: í° í´ëŸ¬ìŠ¤í„° ì•„ì´ì½˜

## í–¥í›„ ê°œì„  ì‚¬í•­

### Phase 1 (í˜„ì¬)

- âœ… ê¸°ë³¸ í´ëŸ¬ìŠ¤í„°ë§ êµ¬í˜„
- âœ… ìƒ‰ìƒ ì½”ë”©
- âœ… ì¤Œ ë ˆë²¨ë³„ í‘œì‹œ

### Phase 2 (ê³„íš)

- [ ] í´ëŸ¬ìŠ¤í„° ë‚´ í‰ê·  ê°€ê²© í‘œì‹œ
- [ ] ì§€ì—­ëª… í‘œì‹œ (ëŒ€í˜• í´ëŸ¬ìŠ¤í„°)
- [ ] íˆíŠ¸ë§µ ì˜¤ë²„ë ˆì´ ì˜µì…˜

### Phase 3 (ê³„íš)

- [ ] ì‹œê°„ëŒ€ë³„ í´ëŸ¬ìŠ¤í„° í•„í„°
- [ ] ì»¤ìŠ¤í…€ í´ëŸ¬ìŠ¤í„° ë°˜ê²½ ì„¤ì •
- [ ] í´ëŸ¬ìŠ¤í„° í˜¸ë²„ ì‹œ ë¯¸ë¦¬ë³´ê¸°

### ìµœê·¼ ì—…ë°ì´íŠ¸ (ì™„ë£Œ)

- âœ… ë‹¨ìƒ‰ ë¹¨ê°„ìƒ‰ í´ëŸ¬ìŠ¤í„° ë””ìì¸
- âœ… í´ëŸ¬ìŠ¤í„° í¬ê¸° ë° ê°€ë…ì„± ê°œì„  (80px, êµµì€ í…ìŠ¤íŠ¸)
- âœ… ê°€ì‹œ ì˜ì—­ ê¸°ë°˜ ë™ì  í•„í„°ë§ (ì„±ëŠ¥ í–¥ìƒ)
- âœ… ë§ˆì»¤ì— ìš”ê¸ˆ ì§ì ‘ í‘œì‹œ (ê°€ê²©ë³„ ìƒ‰ìƒ êµ¬ë¶„)
- âœ… ì§€ë„-ë¦¬ìŠ¤íŠ¸ ìë™ ë™ê¸°í™” ë° ìŠ¤í¬ë¡¤
- âœ… Google Maps / Apple Maps ë‚´ë¹„ê²Œì´ì…˜ ì—°ë™
- âœ… ë¬¼ë°©ìš¸ íš¨ê³¼(spiderfy) ì œê±°
- âœ… ë§ˆì»¤ í´ë¦­ ì‹œ ì¤Œ ì•„ì›ƒ ë°©ì§€

## ì‚¬ìš© ì˜ˆì‹œ

### Downtown íƒìƒ‰

1. **ì „ì²´ ë³´ê¸°** (ì¤Œ 12)

   - "Downtown 500ê°œ" í´ëŸ¬ìŠ¤í„° í‘œì‹œ

2. **í´ëŸ¬ìŠ¤í„° í´ë¦­**

   - ì¤Œ 14ë¡œ í™•ëŒ€
   - 5-6ê°œì˜ ì†Œê·¸ë£¹ìœ¼ë¡œ ë¶„ë¦¬

3. **ì†Œê·¸ë£¹ í´ë¦­**

   - ì¤Œ 16ìœ¼ë¡œ í™•ëŒ€
   - 10-20ê°œ ë§ˆì»¤ë¡œ ë¶„ë¦¬

4. **ìµœëŒ€ ì¤Œì¸** (ì¤Œ 17+)
   - ê°œë³„ ì£¼ì°¨ ë¯¸í„° í‘œì‹œ
   - ì •í™•í•œ ìœ„ì¹˜ì™€ ìš”ê¸ˆ í™•ì¸

## ë””ë²„ê¹…

### í´ëŸ¬ìŠ¤í„°ê°€ í‘œì‹œë˜ì§€ ì•Šì„ ë•Œ

```javascript
// ì½˜ì†”ì—ì„œ í™•ì¸
map.eachLayer((layer) => {
  console.log(layer); // MarkerClusterGroup í™•ì¸
});
```

### CSSê°€ ë¡œë“œë˜ì§€ ì•Šì„ ë•Œ

`app/globals.css`ì— ë‹¤ìŒ import í™•ì¸:

```css
@import "leaflet.markercluster/dist/MarkerCluster.css";
@import "leaflet.markercluster/dist/MarkerCluster.Default.css";
```

## ì°¸ê³  ìë£Œ

- [Leaflet.markercluster GitHub](https://github.com/Leaflet/Leaflet.markercluster)
- [Leaflet Documentation](https://leafletjs.com/)
- [ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ë§ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤](https://developers.google.com/maps/documentation/javascript/marker-clustering)

---

**ì´ í´ëŸ¬ìŠ¤í„°ë§ ì‹œìŠ¤í…œìœ¼ë¡œ ì‚¬ìš©ìëŠ” ìˆ˜ì²œ ê°œì˜ ì£¼ì°¨ ë¯¸í„°ë¥¼ ë¹ ë¥´ê³  ì§ê´€ì ìœ¼ë¡œ íƒìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!** ğŸ‰
